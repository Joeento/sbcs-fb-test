{% extends 'base.html' %}
{% block body %}
<div id="fb-root"></div>
<script>
	/*
	TODO:
	-Change post picture
	-Edit post copy
	-Should we pass the appId through python so it will remain a secret?
	*/
	window.fbAsyncInit = function() {
		FB.init({
			appId      : '{{app_id}}',
			status     : true,
			xfbml      : true
		});
	};
	(function(d, s, id){
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.id = id;
		js.src = "//connect.facebook.net/en_US/all.js";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
</script>
<div class="content transparent">
	<h1>You are {{result}}</h1> 
	<p>{{description}}</p>
	<div class="button-container">
		<a href="#" class="btn btn-social btn-facebook" id="share-fb">
			<i class="fa fa-facebook"></i> Share on Facebook
		</a>
	</div>
</div>
<script>
	$('.transparent').blurjs({
		source: 'body',
		radius: 10,
		overlay: 'rgba(255,255,255,0.45)'
	});
	$(document).ready(function() {
		$("#share-fb").click(function(event) {
			FB.ui(
			{
				method: 'feed',
				name: '{{result}}',
				caption: 'What\'s My Facebook sin?',
				description: (
					'{{description}}'
					),
				link: 'http://whats-my-fb-sin.com/',
				picture: 'http://www.fbrell.com/public/f8.jpg'
			});
			event.preventDefault();
		});
	})
</script>
<script>
	history.replaceState({}, 'Your FB sin', '/result');
</script>
{% endblock %}
